<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Chat - InferencePortAI</title>
		<link rel="stylesheet" href="../styles/styles.css" />
		<script type="module" src="../Components.js"></script>
		<script type="module" src="../scripts/staticload/index.js"></script>
		<link
			rel="stylesheet"
			href="../publicvendor/katex/katex.min.css"
			crossorigin="anonymous"
		/>
		<script
			defer
			src="../publicvendor/katex/katex.min.js"
			crossorigin="anonymous"
		></script>
		<script
			defer
			src="../publicvendor/katex/auto-render.min.js"
			crossorigin="anonymous"
		></script>
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				renderMathInElement(document.body, {
					delimiters: [
						{ left: "$$", right: "$$", display: true },
						{ left: "$", right: "$", display: true },
						{ left: "\\(", right: "\\)", display: false },
						{ left: "\\[", right: "\\]", display: true },
					],
					throwOnError: false,
				});
			});
		</script>
		<style>
			.search-btn {
				margin-top: 6px;
				display: inline-flex;
				align-items: center;
				gap: 6px;
				padding: 6px 12px;
				font-size: 14px;
				border-radius: 6px;
				border: 1px solid #ccc;
				background: #f9f9f9;
				cursor: pointer;
				display: inline-flex;
				width: auto;
			}

			.search-btn:hover {
				background: #f0f0f0;
			}

			.search-icon {
				font-size: 14px;
			}
			.session-loader {
				position: fixed;
				top: var(--navbar-height, 80px);
				left: 0;
				right: 0;
				bottom: 0;
				background: var(--bg-light);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 9000;
				opacity: 1;
				transition: opacity 2s ease;
			}
			.session-loader.fading {
				opacity: 0;
			}
			.session-loader.hidden {
				display: none;
			}
			.loader-card {
				width: min(420px, 80%);
				display: flex;
				flex-direction: column;
				gap: 14px;
			}
			.loader-track {
				width: 100%;
				height: 12px;
				border-radius: 999px;
				background: rgba(255, 255, 255, 0.08);
				overflow: hidden;
			}

			#session-progress-bar {
				height: 100%;
				width: 0%;
				border-radius: 999px;
				background: linear-gradient(90deg, #e5c846, #f1d763, #d5e546);
				background-size: 200% 100%;
				transition: width 420ms cubic-bezier(0.4, 0, 0.2, 1);
				animation: shimmer 1.6s linear infinite;
			}

			@keyframes shimmer {
				0% {
					background-position: 0% 0;
				}
				100% {
					background-position: 200% 0;
				}
			}

			.loader-text {
				text-align: center;
				font-size: 13px;
				opacity: 0.7;
				letter-spacing: 0.3px;
			}

			#app-root.hidden {
				display: none;
			}

			html {
				overflow: hidden;
			}

			body {
				overflow-y: hidden;
				overflow-x: visible;
			}
		</style>
	</head>
	<body>
		<type1-navbar></type1-navbar>
		<div id="session-loader" class="session-loader hidden">
			<div class="loader-card">
				<div class="loader-track">
					<div id="session-progress-bar"></div>
				</div>
				<div class="loader-text">Loading sessions‚Ä¶</div>
			</div>
		</div>

		<div id="session-context-menu" class="context-menu hidden">
			<div class="context-item" data-action="rename">Rename</div>
			<div class="context-item" data-action="report" style="color: rgb(226, 147, 0);">Report Content</div>
			<div class="context-item" data-action="delete" style="color: red;">Delete Session</div>
			<div class="context-item" data-action="delete_all" style="color: red;">Delete All Sessions</div>
		</div>

		<main id="app-root" class="hidden">
			<div class="chat-container">
				<aside class="sidebar">
					<button id="new-session-btn" type="button">+ New chat</button>
					<div class="lightning-sidebar-banner">
						<div class="lightning-sidebar-copy">
							Lightning Text v2 delivers ultra fast responses up to 1000 words/sec.
						</div>
						<p class="lightning-sidebar-note">
							New: Lightning-Image Turbo is now free and is the default image generation model.
						</p>
						<div class="lightning-toggle-inline">
							<span>Enable Lightning</span>
							<toggle-switch
								id="lightning-toggle-sidebar"
								name="lightning-toggle-sidebar"
								aria-label="Enable Lightning"
							></toggle-switch>
						</div>
					</div>
					<input
						type="hidden"
						id="session-search"
					/>
					<ul id="session-list"></ul>
					<div class="sidebar-controls" id="sidebar-controls">
						<div id="standard-model-controls">
							<label for="host-select">Host</label>
							<select id="host-select"></select>
							<label for="model-select">Model</label>
							<select id="model-select"></select>
						</div>
						<div id="lightning-status" class="lightning-status" aria-hidden="true">
							<p class="lightning-status-title">Lightning is Enabled.</p>
							<p class="lightning-status-model">Text model selected: @InferencePort/Lightning-Text-v2.</p>
							<p class="lightning-status-image">Default image model: @InferencePort/Lightning-Image-Turbo (free).</p>
						</div>
					</div>
				</aside>

				<section class="chat-panel">
					<div id="chat-box"></div>
					<div id="welcome-hero" class="welcome-hero" aria-hidden="true">
						<h1 class="welcome-title">What's on your mind today?</h1>
					</div>
					<chat-box></chat-box>
					<div id="welcome-cards" class="welcome-cards" aria-hidden="true">
						<button type="button" class="welcome-card" data-prompt="Create images for a blog post concept.">
							<span class="welcome-card-icon">üñºÔ∏è</span>
							<span>Create images</span>
						</button>
						<button type="button" class="welcome-card" data-prompt="Teach me something useful in 5 minutes.">
							<span class="welcome-card-icon">üìñ</span>
							<span>Learn something</span>
						</button>
						<button type="button" class="welcome-card" data-prompt="Help me write and edit this draft clearly.">
							<span class="welcome-card-icon">‚úèÔ∏è</span>
							<span>Write or edit</span>
						</button>
						<button type="button" class="welcome-card" data-prompt="Walk me through this task step by step.">
							<span class="welcome-card-icon">üí°</span>
							<span>Step-by-step help</span>
						</button>
					</div>
				</section>
			</div>
			<div id="notification-container"></div>
		</main>
		<script type="module" src="../scripts/renderer/chat.js"></script>
	</body>
</html>

<!--
Copyright 2025 Rihaan Meher

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
