<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Chat - InferencePortAI</title>
		<link rel="stylesheet" href="../styles/styles.css" />
		<script type="module" src="../Components.js"></script>
		<script type="module" src="../scripts/staticload/index.js"></script>
		<link
			rel="stylesheet"
			href="../publicvendor/katex/katex.min.css"
			crossorigin="anonymous"
		/>
		<script
			defer
			src="../publicvendor/katex/katex.min.js"
			crossorigin="anonymous"
		></script>
		<script
			defer
			src="../publicvendor/katex/auto-render.min.js"
			crossorigin="anonymous"
		></script>
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				renderMathInElement(document.body, {
					delimiters: [
						{ left: "$$", right: "$$", display: true },
						{ left: "$", right: "$", display: true },
						{ left: "\\(", right: "\\)", display: false },
						{ left: "\\[", right: "\\]", display: true },
					],
					throwOnError: false,
				});
			});
		</script>
		<style>
			.search-btn {
				margin-top: 6px;
				display: inline-flex;
				align-items: center;
				gap: 6px;
				padding: 6px 12px;
				font-size: 14px;
				border-radius: 6px;
				border: 1px solid #ccc;
				background: #f9f9f9;
				cursor: pointer;
				display: inline-flex;
				width: auto;
			}

			.search-btn:hover {
				background: #f0f0f0;
			}

			.search-icon {
				font-size: 14px;
			}
			.session-loader {
				position: fixed;
				top: var(--navbar-height, 80px);
				left: 0;
				right: 0;
				bottom: 0;
				background: var(--bg-light);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 9000;
				opacity: 1;
				transition: opacity 2s ease;
			}
			.session-loader.fading {
				opacity: 0;
			}
			.session-loader.hidden {
				display: none;
			}
			.loader-card {
				width: min(420px, 80%);
				display: flex;
				flex-direction: column;
				gap: 14px;
			}
			.loader-track {
				width: 100%;
				height: 12px;
				border-radius: 999px;
				background: rgba(255, 255, 255, 0.08);
				overflow: hidden;
			}

			#session-progress-bar {
				height: 100%;
				width: 0%;
				border-radius: 999px;
				background: linear-gradient(90deg, #e5c846, #f1d763, #d5e546);
				background-size: 200% 100%;
				transition: width 420ms cubic-bezier(0.4, 0, 0.2, 1);
				animation: shimmer 1.6s linear infinite;
			}

			@keyframes shimmer {
				0% {
					background-position: 0% 0;
				}
				100% {
					background-position: 200% 0;
				}
			}

			.loader-text {
				text-align: center;
				font-size: 13px;
				opacity: 0.7;
				letter-spacing: 0.3px;
			}

			#app-root.hidden {
				display: none;
			}
		</style>
	</head>
	<body>
		<type1-navbar></type1-navbar>
		<div id="session-loader" class="session-loader hidden">
			<div class="loader-card">
				<div class="loader-track">
					<div id="session-progress-bar"></div>
				</div>
				<div class="loader-text">Loading sessionsâ€¦</div>
			</div>
		</div>

		<div id="rename-dialog" class="modal hidden">
			<div class="modal-content">
				<h3>Rename Session</h3>
				<input type="text" id="rename-input" />
				<div class="modal-actions">
					<button id="rename-cancel">Cancel</button>
					<button id="rename-confirm">Rename</button>
				</div>
			</div>
		</div>
		<div id="report-dialog" class="modal hidden">
			<div class="modal-content" style="width: 500px;">
				<h3>Report Inappropriate Content</h3>
				<p>In the event that one of the models used here outputs 
					inappropriate content, you may report it by following the 
					instructions here: 
					<a href="javascript:window.utils.web_open('https://InferencePortAI.vercel.app/security.html#reporting')">
						InferencePortAI Reporting Instructions
					</a>
				</p>
				<div class="modal-actions">
					<button id="report-close">Close</button>
				</div>
			</div>
		</div>
		<div id="session-context-menu" class="context-menu hidden">
			<div class="context-item" data-action="rename">Rename</div>
			<div class="context-item" data-action="report" style="color: rgb(226, 147, 0);">Report Content</div>
			<div class="context-item" data-action="delete" style="color: red;">Delete Session</div>
			<div class="context-item" data-action="delete_all" style="color: red;">Delete All Sessions</div>
		</div>
		<div id="remote-host-dialog" class="modal hidden">
			<div class="modal-content">
				<h3>Add Remote Host</h3>
				<p>Enter the remote host IP or URL (e.g. 1.2.3.4 or 1.2.3.4:52458 or http://1.2.3.4:52458)</p>
				<input type="text" id="remote-host-input" placeholder="Host URL" style="width:100%;max-width:420px;margin-bottom:8px" />
				<input type="text" id="remote-host-alias" placeholder="Alias (max 20 chars)" maxlength="20" style="width:100%;max-width:420px;margin-bottom:8px" />
				<div class="modal-actions">
					<button id="remote-host-cancel">Cancel</button>
					<button id="remote-host-confirm">Add Host</button>
				</div>
			</div>
		</div>
		<div id="manage-hosts-dialog" class="modal hidden">
			<div class="modal-content">
				<h3>Manage Remote Hosts</h3>
				<ul id="remote-host-list"></ul>
				<button id="manage-hosts-close">Close</button>
			</div>
		</div>
		<main
			id="app-root"
			class="hidden"
		>
			<div class="chat-container">
				<aside class="sidebar">
					<select id="host-select" style="margin-bottom:8px;">
						<option value="local">Local</option>
						<option value="add_remote">Add Remote Host...</option>
						<option value="manage_hosts">Manage Remote Hosts</option>
					</select>
					<select id="model-select"></select>
					<input
						type="text"
						id="session-search"
						style="padding-bottom: 10px"
						placeholder="Search sessions..."
					/>
					<p></p>
					<ul id="session-list"></ul>
					<button id="new-session-btn">+ New Session</button>
				</aside>

				<section class="chat-panel">
					<div id="chat-box"></div>
					<chat-box></chat-box>
				</section>
			</div>
			<div id="notification-container"></div>
		</main>
		<script type="module" src="../scripts/renderer/chat.js"></script>
	</body>
</html>

<!--
Copyright 2025 Rihaan Meher

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
